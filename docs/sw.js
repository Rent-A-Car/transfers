const Static_CACHE_Version="21-01-22-4",Static_CACHE="static-21-01-22-4",Static_CACHEAssets=["./","./offline.html","./css/main.css","./css/iconsfont.css","./css/RobotoSlab.css","./css/bootstrap.min.css","./js/main.js","./js/menu.js","https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js","./favicon.ico","./icons/android-chrome-192x192.png","./icons/apple-touch-icon-precomposed.png","./icons/GoogleLogo.svg","/css/fonts/iconsfont.woff2","/css/fonts/iconsfont.woff","https://fonts.gstatic.com/s/robotoslab/v12/BngbUXZYTXPIvIBgJJSb6s3BzlRRfKOFbvjojISma2RjRdE.woff2","https://fonts.gstatic.com/s/robotoslab/v12/BngbUXZYTXPIvIBgJJSb6s3BzlRRfKOFbvjojISmb2Rj.woff2","./manifest.webmanifest"],DCACHE="cache-auto",NoCACHE=["apis.google.com","www.googleapis.com"];async function checkCache(e){if("GET"==e.method){let t=new URL(e.url),o=e;location.hostname==t.hostname&&(t.search="",o=new Request(t.toString(),{cache:e.cache,context:e.context,credentials:e.credentials,headers:e.headers,integrity:e.integrity,method:e.method,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy,body:e.body,bodyUsed:e.bodyUsed}));const s=await caches.open(Static_CACHE);return await s.match(o||e)||checkOnline(o||e)}return await fetch(e)}async function checkOnline(e){const t=await caches.open(DCACHE);try{let o=new URL(e.url);const s=await fetch(e);return NoCACHE.includes(o.hostname)?console.log("noCACHED"):await t.put(e,s.clone()),s}catch(o){console.log(o);const s=await t.match(e);if(s)return s}}self.addEventListener("install",async e=>{const t=await caches.open(Static_CACHE);ec=0;for(var o=0;o<6;o++)try{await t.addAll(Static_CACHEAssets);break}catch(e){console.log(e),ec=ec++}5==ec?self.registration.unregister():console.log("Service worker fetch ok"),console.log("Service worker встановлено")}),self.addEventListener("activate",async e=>{const t=(await caches.keys()).map(async e=>{[Static_CACHE].includes(e)||await caches.delete(e)});await Promise.all(t),console.log("Service worker актевовано (видалено застарілий кеш)")}),self.addEventListener("fetch",e=>{e.respondWith(checkCache(e.request))});